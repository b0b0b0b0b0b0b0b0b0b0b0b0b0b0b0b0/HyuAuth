# HyuAuth

Плагин авторизации для Hytale серверов с поддержкой регистрации и входа через UI окна.

## Возможности
- Регистрация и авторизация через UI окна
- Хранение данных в SQLite базе данных
- Хеширование паролей с использованием BCrypt
- Система сессий по IP и нику игрока
- Автоматическая авторизация при повторном входе в течение времени сессии
- Таймаут авторизации с автоматическим киком
- Административные команды для управления аккаунтами

## Требования

- Java 25
- Hytale Server

2. Скопируйте  JAR файл в папку `mods/` вашего Hytale сервера

3. Перезапустите сервер

## Конфигурация

Файл конфигурации создается автоматически в папке плагина: `config.yml`

```yaml
settings:
  login_timeout_seconds: 60
  session_timeout_minutes: 5
  database:
    file: "auth.db"
```

### Параметры

- `login_timeout_seconds` - время в секундах, которое игрок имеет на авторизацию перед киком (по умолчанию: 60)
- `session_timeout_minutes` - время в минутах, в течение которого действует сессия для автоматической авторизации (по умолчанию: 5)
- `database.file` - имя файла базы данных SQLite (по умолчанию: "auth.db")

## Использование

### Для игроков

При первом входе на сервер игроку показывается окно регистрации. После регистрации при следующих входах показывается окно входа.

Если игрок заходит с того же IP и ником в течение времени сессии (по умолчанию 5 минут), авторизация происходит автоматически.

### Команды для администраторов

- `/authreset <игрок>` - сбросить аккаунт указанного игрока (требует права `hytale.admin`)
- `/authconfig <секунды>` - установить таймаут авторизации в секундах (требует права `hytale.admin`)

## Безопасность

- Пароли хранятся в виде BCrypt хешей (12 раундов)
- Пароли никогда не передаются и не хранятся в открытом виде
- Минимальная длина пароля: 3 символа
- Максимальная длина пароля: 64 символа

## Структура базы данных

Таблица `users`:
- `uuid` (TEXT, PRIMARY KEY) - UUID игрока
- `username` (TEXT, NOT NULL) - имя игрока
- `password_hash` (TEXT, NOT NULL) - BCrypt хеш пароля
- `created_at` (INTEGER, NOT NULL) - время создания аккаунта в миллисекундах

